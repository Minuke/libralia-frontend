<form class="password-change-form" (ngSubmit)="passwordChange()" [formGroup]="passwordChangeForm">

  <div class="password-change-form__group password-change-form__group--new-password1">
    <label for="new_password1" class="password-change-form__label">Contraseña:</label>
    <div class="password-change-form__input-wrapper">
      <input [type]="mostrarContrasenia() ? 'text' : 'password'" id="new_password1"
        class="password-change-form__input password-change-form__input--password"
        placeholder="Introduce tu nueva contraseña" formControlName="new_password1" required />
      @if (mostrarContrasenia()) {
      <img (click)="togglePasswordVisibility()" src="./images/show_password.svg" alt="Ocultar contraseña"
        class="password-change-form__icon" />
      } @else {
      <img (click)="togglePasswordVisibility()" src="./images/hide_password.svg" alt="Mostrar contraseña"
        class="password-change-form__icon" />
      }
    </div>
    <app-input-errors [control]="passwordChangeForm.get('new_password1')"></app-input-errors>
  </div>

  <div class="password-change-form__group password-change-form__group--new-password2">
    <label for="new_password2" class="password-change-form__label">Confirmar contraseña:</label>
    <div class="password-change-form__input-wrapper">
      <input [type]="mostrarContrasenia() ? 'text' : 'password'" id="new_password2"
        class="password-change-form__input password-change-form__input--password"
        placeholder="Repite tu nueva contraseña" formControlName="new_password2" required />
      @if (mostrarContrasenia()) {
      <img (click)="togglePasswordVisibility()" src="./images/show_password.svg" alt="Ocultar contraseña"
        class="password-change-form__icon" />
      } @else {
      <img (click)="togglePasswordVisibility()" src="./images/hide_password.svg" alt="Mostrar contraseña"
        class="password-change-form__icon" />
      }
    </div>
    <app-input-errors [control]="passwordChangeForm.get('new_password2')"></app-input-errors>
  </div>

  <div class="password-change-form__actions">
    <button type="submit" class="password-change-form__button password-change-form__button--primary"
      [disabled]="passwordChangeForm.invalid || !passwordChangeForm.dirty">
      Guardar contraseña
    </button>
    <button class="password-change-form__button" routerLink="/dashboard/profile">Volver</button>
  </div>

  @if (error()) {
  <div class="password-change-form__error">
    {{ error() }}
  </div>
  }

  @if (loading()) {
  <div class="password-change-form__loading">
    Cargando...
  </div>
  }

</form>